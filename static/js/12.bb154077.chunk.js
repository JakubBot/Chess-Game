(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[12],{115:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(29),o=n(1),i=n.n(o),c=n(73),u=n.n(c),s=n(69),l=n(21),f=n(66),b=n(88),v=n(72),m=n(15);function d(e,t,n){if(null===e)return 0;var a={p:[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],n:[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],b:[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],r:[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],q:[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],k:[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]]}[e.type],r={p:10,n:30,b:35,r:50,q:90,k:900}[e.type];return"w"===e.color?r+=a[t][n]:r+=a[7-t][n],"w"===e.color?r:-r}function p(e,t,n,a,r){var o=e.moves(),i=o.length;if(0===t)return-function(e){for(var t=0,n=0;n<8;n++)for(var a=0;a<8;a++)t+=d(e[n][a],n,a);return t}(e.board());if(n){for(var c=-1/0,u=0;u<i;u++)if(e.move(o[u]),c=Math.max(c,p(e,t-1,!n,a,r)),e.undo(),(a=Math.max(a,c))>=r)return c;return c}for(var s=1/0,l=0;l<i;l++)if(e.move(o[l]),s=Math.min(s,p(e,t-1,!n,a,r)),e.undo(),a>=(r=Math.min(r,s)))return s;return s}var j=n(68),O=n(67),h=n(34),S=n(71),w=n(89),g=window.jQuery,k=null,T=new u.a;var x={updateMoves:S.e,updateStatusText:S.f,loginUserWithSocials:h.c,loginUserWithForm:h.b,updateLocalStorage:h.d};t.default=Object(l.b)((function(e){var t=e.boardInfo,n=t.piece,a=t.board,r=t.moves,o=t.statusText;return{piece:n,boardType:a,user:e.user,moves:r,currentStatusText:o}}),x)((function(e){var t=e.history,n=e.boardType,c=e.user,u=e.piece,l=e.updateMoves,d=e.updateStatusText,h=e.moves,S=e.currentStatusText,x=e.loginUserWithSocials,_=e.loginUserWithForm,E=e.updateLocalStorage,y=Object(f.a)(m.a),M=Object(r.a)(y,1)[0],G=Object(o.useState)({whiteSan:"",blackSan:"",id:null,index:0}),q=Object(r.a)(G,2),A=q[0],C=q[1],L=Object(o.useState)({whiteTime:300,blackTime:300,isGameActive:!1}),I=Object(r.a)(L,2),N=I[0],R=I[1],U=Object(o.useState)(!1),W=Object(r.a)(U,2),F=W[0],z=W[1],B=Object(o.useRef)(null),D=Object(o.useRef)(null);function J(){var e=Object(j.e)(T.turn(),1,Object(j.b)(1,T.turn()),T.in_draw(),T.in_check(),T.in_checkmate(),T.in_threefold_repetition(),T.insufficient_material(),T.in_stalemate());e.split(" ").includes("check")?D.current.play():B.current.play(),d(e)}return Object(o.useEffect)((function(){return null!==M&&null===c&&x(M),null===M&&null===c&&_(),function(){return T.reset()}}),[M]),Object(o.useEffect)((function(){R((function(e){return Object(a.a)(Object(a.a)({},e),{},{isGameActive:!1})}))}),[T.game_over(),F]),Object(o.useEffect)((function(){var e=null;return N.isGameActive&&(e=setInterval((function(){"w"===T.turn()?R((function(e){return Object(a.a)(Object(a.a)({},e),{},{whiteTime:e.whiteTime-1})})):R((function(e){return Object(a.a)(Object(a.a)({},e),{},{blackTime:e.blackTime-1})}))}),1e3)),(N.whiteTime<=0||N.blackTime<=0)&&(clearInterval(e),z(!0)),function(){return clearInterval(e)}}),[N.isGameActive,N]),Object(o.useEffect)((function(){if(A){var e=A.whiteSan,t=A.blackSan,n=A.index;""===e&&""===t||l({whiteSan:e,blackSan:t,index:n,id:Object(O.a)(5)}),""!==e&&""!==t&&C(Object(a.a)(Object(a.a)({},A),{},{whiteSan:"",blackSan:"",id:null}))}}),[A]),Object(o.useEffect)((function(){function e(){var e=function(e,t,n){for(var a,r=e.moves(),o=[],i=r.length,c=-1/0,u=0;u<i;u++){var s=r[u];o.push(e.move(s));var l=p(e,t-1,!n,-1/0,1/0);e.undo(),l>=c&&(c=l,a=s)}var f=o.find((function(e){return e.san===a}));return{bestMove:a,move:f}}(T,2,!0),t=e.bestMove,n=e.move;C((function(e){return Object(a.a)(Object(a.a)({},e),{},{blackSan:null===n||void 0===n?void 0:n.san})})),T.move(t),k.position(T.fen()),J()}var t={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(u,"/{piece}.png"),draggable:!0,position:"start",onDragStart:function(e,t){return Object(j.c)(T,e),!T.game_over()&&"w"===T.turn()&&Object(j.a)(T.turn(),t)},onDrop:function(t,n){Object(j.d)();var r=T.move({from:t,to:n,promotion:"q"});if(null===r)return"snapback";window.setTimeout(e,3200),C((function(e){return Object(a.a)(Object(a.a)({},e),{},{whiteSan:null===r||void 0===r?void 0:r.san,index:e.index+1})})),R((function(e){return Object(a.a)(Object(a.a)({},e),{},{isGameActive:!0})}))},onSnapEnd:function(){k.position(T.fen()),J()},onMouseoutSquare:j.d,onMouseoverSquare:function(e){Object(j.c)(T,e)}};k=Object(s.a)("board",t),g(window).resize(k.resize);var r=g(".chessboard-63f37"),o=g(".square-55d63");"wooden"===n?(r.addClass("woodenBoard"),o.addClass("transparent")):"classic"===k&&(r.removeClass("woodenBoard"),o.removeClass("transparent")),J()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"page__wrapper"},(T.game_over()||F)&&i.a.createElement(w.a,{timeLeft:N,turn:T.turn(),user:c}),i.a.createElement(v.a,{timeLeft:N,moveSongRef:B,checkSongRef:D,links:!1,playerNum:1,isGameEnded:T.game_over()||F,changeSite:t.push,updateLocalStorage:E,userName:null===c||void 0===c?void 0:c.userName,points:null===c||void 0===c?void 0:c.points,turn:T.turn()}),i.a.createElement(b.a,{moves:h,statusText:S})))}))}}]);
//# sourceMappingURL=12.bb154077.chunk.js.map