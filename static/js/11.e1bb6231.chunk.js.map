{"version":3,"sources":["components/OnlineGame/index.js","containers/OnlineGamePage/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["$","window","jQuery","unsubscribe","board","OnlineGame","boardType","piece","user","updateMoves","mode","updateStatusText","changeSite","updateLocalStorage","props","useState","Chess","gameEngine","token","match","params","state","setState","moveSongRef","useRef","checkSongRef","isGameEndByTime","setIsGameEndByTime","useEffect","timer","playerNum","figurePlayer","isGameActive","setInterval","setTimeLeft","timeLeft","whiteTime","blackTime","clearInterval","cb","id","game","load","fen","isMyTurn","turn","position","config","pieceTheme","process","draggable","onDragStart","square","makeDots","addClass","game_over","allowMove","onDrop","source","target","removeClass","removeDotSquares","move","from","to","promotion","chessRef","firestore","collection","doc","update","whiteSan","san","blackSan","onSnapEnd","onMouseoutSquare","onMouseoverSquare","Chessboard","orientation","$board","squares","resize","initBoard","updateBoard","p1_token","p2_token","moveIndex","prevState","statusText","in_draw","in_check","in_checkmate","in_threefold_repetition","insufficient_material","in_stalemate","updateState","forEach","name","where","onSnapshot","querySnapshot","size","docs","map","data","split","includes","current","play","generateID","firebase","FieldValue","increment","EndGameCard","Game","links","userName","points","isGameEnded","propTypesd","PropTypes","string","shape","photo","uid","number","func","isRequired","withRouter","mapDispatchToProps","boardActions","loginUserWithSocials","userActions","loginUserWithForm","connect","boardInfo","moves","history","useAuthState","auth","authUser","className","push","ScoreBoard","isOnline","_objectWithoutProperties","excluded","key","i","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call"],"mappings":"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","file":"static/js/11.e1bb6231.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Chess from 'chess.js/chess';\nimport Chessboard from '@chrisoakman/chessboardjs/dist/chessboard-1.0.0';\nimport { withRouter } from 'react-router-dom';\nimport Game from '../common/Game';\nimport EndGameCard from '../EndGameCard';\nimport firebase, { firestore } from '../../firebase-config';\nimport { figurePlayer, setTimeLeft } from '../utils/gameUtils/onlineGameUtils';\nimport {\n  removeDotSquares,\n  allowMove,\n  makeDots,\n  statusText,\n  isMyTurn,\n} from '../utils/gameUtils/commonGameUtils';\nimport { generateID } from '../utils';\n\nconst $ = window.jQuery;\n\nconst INITIAL_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\nlet unsubscribe = null;\nlet board = null;\nconst OnlineGame = ({\n  boardType,\n  piece,\n  user,\n  mode,\n  updateMoves,\n  updateStatusText,\n  changeSite,\n  updateLocalStorage,\n  ...props\n}) => {\n  const [gameEngine] = useState(new Chess());\n  const [state, setState] = useState({\n    token: props.match.params.token,\n  });\n  const moveSongRef = useRef(null);\n  const checkSongRef = useRef(null);\n\n  const [isGameEndByTime, setIsGameEndByTime] = useState(false);\n  useEffect(() => {\n    let timer = null;\n    const playerNum = figurePlayer(state.token, state);\n    if (state.isGameActive && playerNum === 1) {\n      timer = setInterval(() => {\n        setTimeLeft(state, gameEngine);\n      }, 1000);\n    }\n    if (state.timeLeft?.whiteTime <= 0 || state.timeLeft?.blackTime <= 0) {\n      clearInterval(timer);\n      setIsGameEndByTime(true);\n    }\n    return () => clearInterval(timer);\n  }, [state.isGameActive, state.timeLeft]);\n\n  useEffect(() => {\n    ListenForUpdates(state.token, (id, game) => {\n      updateBoard(id, game);\n      updateState(id, game);\n    });\n\n    return () => unsubscribe && unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (state?.statusText?.split(' ').includes('check')) {\n      checkSongRef.current.play();\n    } else {\n      moveSongRef.current.play();\n    }\n    updateStatusText(state.statusText);\n  }, [state.statusText]);\n\n  useEffect(() => {\n    const { whiteSan, blackSan } = state;\n    if (whiteSan || blackSan) {\n      updateMoves({\n        whiteSan,\n        blackSan,\n        id: generateID(5),\n        moveIndex: state.moveIndex ?? 1,\n      });\n    }\n    const chessRef = firestore.collection('games').doc(state.id);\n    if (state.whiteSan && state.blackSan) {\n      chessRef.update({\n        whiteSan: '',\n        blackSan: '',\n        moveIndex: firebase.firestore.FieldValue.increment(1),\n      });\n    }\n  }, [state.whiteSan, state.blackSan]);\n\n  function updateState(\n    id,\n    {\n      p1_token,\n      p2_token,\n      whiteSan,\n      blackSan,\n      timeLeft,\n      moveIndex,\n      isGameActive,\n    }\n  ) {\n    const playerNum = figurePlayer(state.token, { p1_token, p2_token });\n    setState((prevState) => ({\n      ...prevState,\n      isGameActive,\n      timeLeft,\n      id,\n      moveIndex,\n      p1_token,\n      p2_token,\n      whiteSan,\n      blackSan,\n      statusText: statusText(\n        gameEngine.turn(),\n        playerNum,\n        isMyTurn(playerNum, gameEngine.turn()),\n        gameEngine.in_draw(),\n        gameEngine.in_check(),\n        gameEngine.in_checkmate(),\n        gameEngine.in_threefold_repetition(),\n        gameEngine.insufficient_material(),\n        gameEngine.in_stalemate()\n      ),\n    }));\n  }\n\n  function updateBoard(id, game) {\n    const playerNum = figurePlayer(state.token, game);\n    gameEngine.load(game.fen || INITIAL_FEN);\n\n    if (!board) {\n      board = initBoard(id, game);\n      board.position(gameEngine.fen());\n    } else if (isMyTurn(playerNum, gameEngine.turn())) {\n      board.position(gameEngine.fen());\n    }\n  }\n  function initBoard(id, game) {\n    const playerNum = figurePlayer(state.token, game);\n    const config = {\n      pieceTheme: `${process.env.PUBLIC_URL}/img/chesspieces/${piece}/{piece}.png`,\n      draggable: true,\n      position: 'start',\n      onDragStart,\n      onDrop,\n      onSnapEnd,\n      onMouseoutSquare: removeDotSquares,\n      onMouseoverSquare,\n    };\n\n    board = Chessboard('board', config);\n    if (playerNum === 2) {\n      board.orientation('black');\n    }\n\n    const $board = $('.chessboard-63f37');\n    const squares = $('.square-55d63');\n\n    if (boardType === 'wooden') {\n      $board.addClass('woodenBoard');\n      squares.addClass('transparent');\n    } else if (board === 'classic') {\n      $board.removeClass('woodenBoard');\n      squares.removeClass('transparent');\n    }\n\n    $(window).resize(board.resize);\n\n    return board;\n\n    function onMouseoverSquare(square) {\n      const canIMove = isMyTurn(playerNum, gameEngine.turn());\n\n      if (canIMove) {\n        makeDots(gameEngine, square);\n      }\n    }\n\n    function onDragStart(square, piece) {\n      makeDots(gameEngine, square);\n      const img = $(`img[data-piece=\"${piece}\"]`);\n      img.addClass('z-index');\n      return (\n        !gameEngine.game_over() &&\n        isMyTurn(playerNum, gameEngine.turn()) &&\n        allowMove(gameEngine.turn(), piece)\n      );\n    }\n\n    function onDrop(source, target, piece) {\n      const img = $(`img[data-piece=\"${piece}\"]`);\n      img.removeClass('z-index');\n      removeDotSquares();\n      const move = gameEngine.move({\n        from: source,\n        to: target,\n        promotion: 'q',\n      });\n      if (move === null) return 'snapback';\n      const chessRef = firestore.collection('games').doc(id);\n      if (playerNum === 1) {\n        chessRef.update({\n          fen: gameEngine.fen(),\n          whiteSan: move.san,\n          isGameActive: true,\n        });\n      } else if (playerNum === 2) {\n        chessRef.update({\n          fen: gameEngine.fen(),\n          blackSan: move.san,\n        });\n      }\n    }\n\n    function onSnapEnd() {\n      return board.position(gameEngine.fen());\n    }\n  }\n\n  function ListenForUpdates(token, cb) {\n    ['p1_token', 'p2_token'].forEach((name) => {\n      const chessRef = firestore.collection('games').where(name, '==', token);\n      unsubscribe = chessRef.onSnapshot((querySnapshot) => {\n        if (querySnapshot.size) {\n          const [data] = querySnapshot.docs.map((doc) => {\n            return {\n              data: doc.data(),\n              id: doc.id,\n            };\n          });\n          cb(data.id, data.data);\n        }\n      });\n    });\n  }\n  return (\n    <>\n      {(gameEngine.game_over() || isGameEndByTime) && (\n        <EndGameCard\n          timeLeft={state.timeLeft}\n          turn={gameEngine.turn()}\n          user={user}\n        />\n      )}\n\n      <Game\n        timeLeft={state.timeLeft}\n        links\n        moveSongRef={moveSongRef}\n        checkSongRef={checkSongRef}\n        p1_token={state.p1_token}\n        p2_token={state.p2_token}\n        userName={user?.userName}\n        points={user?.points}\n        playerNum={figurePlayer(state.token, state)}\n        isGameEnded={gameEngine.game_over() || isGameEndByTime}\n        changeSite={changeSite}\n        updateLocalStorage={updateLocalStorage}\n        token={state.token}\n      />\n    </>\n  );\n};\n\nOnlineGame.propTypesd = {\n  board: PropTypes.string,\n  piece: PropTypes.string,\n  token: PropTypes.string,\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  updateMoves: PropTypes.func.isRequired,\n  updateStatusText: PropTypes.func.isRequired,\n  changeSite: PropTypes.func.isRequired,\n  updateLocalStorage: PropTypes.func.isRequired,\n};\n\nexport default withRouter(OnlineGame);\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport OnlineGame from '../../components/OnlineGame';\nimport ScoreBoard from '../../components/ScoreBoard';\nimport * as boardActions from '../../redux/actions/boardActions';\nimport * as userActions from '../../redux/actions/userActions';\nimport { auth } from '../../firebase-config';\n\nconst OnlineGamePage = ({\n  user,\n  moves,\n  statusText,\n  piece,\n  boardType,\n  mode,\n  history,\n  updateMoves,\n  updateStatusText,\n  loginUserWithSocials,\n  loginUserWithForm,\n  updateLocalStorage,\n}) => {\n  const [authUser] = useAuthState(auth);\n  useEffect(() => {\n    if (authUser !== null && user === null) {\n      loginUserWithSocials(authUser);\n    }\n    if (authUser === null && user === null) {\n      loginUserWithForm();\n    }\n  }, [authUser]);\n  return (\n    <>\n      <div className=\"page__wrapper\">\n        <OnlineGame\n          changeSite={history.push}\n          user={user}\n          piece={piece}\n          boardType={boardType}\n          updateMoves={updateMoves}\n          updateStatusText={updateStatusText}\n          updateLocalStorage={updateLocalStorage}\n          userName={user?.userName}\n          points={user?.points}\n          mode={mode}\n        />\n        <ScoreBoard isOnline moves={moves} statusText={statusText} />\n      </div>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n  const { moves, statusText, piece, board, mode } = state.boardInfo;\n  const { user } = state;\n  return {\n    moves,\n    statusText,\n    piece,\n    mode,\n    boardType: board,\n    user,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateMoves: boardActions.updateMoves,\n  updateStatusText: boardActions.updateStatusText,\n  loginUserWithSocials: userActions.loginUserWithSocials,\n  loginUserWithForm: userActions.loginUserWithForm,\n  updateLocalStorage: userActions.updateLocalStorage,\n};\n\nOnlineGamePage.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }),\n  boardType: PropTypes.string.isRequired,\n  piece: PropTypes.string.isRequired,\n  mode: PropTypes.string.isRequired,\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  moves: PropTypes.arrayOf(\n    PropTypes.shape({\n      whiteSan: PropTypes.string,\n      blackSan: PropTypes.string,\n      index: PropTypes.number,\n      id: PropTypes.string,\n    })\n  ).isRequired,\n  statusText: PropTypes.string,\n  updateMoves: PropTypes.func.isRequired,\n  updateStatusText: PropTypes.func.isRequired,\n  loginUserWithSocials: PropTypes.func.isRequired,\n  loginUserWithForm: PropTypes.func.isRequired,\n  updateLocalStorage: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OnlineGamePage);\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}