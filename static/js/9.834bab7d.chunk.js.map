{"version":3,"sources":["components/LoginForm/LoginForm.js","containers/LoginPage/index.js","../node_modules/react-firebase-hooks/auth/dist/index.esm.js","components/common/SubmitButton/index.js"],"names":["LoginForm","user","form","errors","signOut","loginFacebook","loginGoogle","onChange","onSubmit","className","formError","TextInput","labelText","value","email","name","password","SubmitButton","text","role","tabIndex","onClick","to","mapDispatchToProps","logOutUser","userActions","loginUserWithSocials","loginUserWithForm","withRouter","connect","state","history","useState","setForm","useAuthState","auth","authUser","setErrors","useEffect","target","prevState","event","preventDefault","firestore","collection","where","get","then","docs","empty","data","method","push","signOutUser","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","defaultState","defaultValue","loading","undefined","useLoadingValue","getDefaultValue","_a","useReducer","action","type","error","dispatch","reset","setError","setValue","currentUser","listener","onAuthStateChanged"],"mappings":"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","file":"static/js/9.834bab7d.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport TextInput from '../common/TextInput';\nimport SubmitButton from '../common/SubmitButton';\nimport './LoginForm.scss';\n\nconst LoginForm = ({\n  user,\n  form,\n  errors,\n  signOut,\n  loginFacebook,\n  loginGoogle,\n  onChange,\n  onSubmit,\n}) => {\n  return (\n    <>\n      <div className=\"login\">\n        <form className=\"login__form\" onSubmit={onSubmit}>\n          <span className=\"formError\">\n            {errors.formError && errors.formError}\n          </span>\n          <TextInput\n            labelText=\"email :\"\n            value={form.email}\n            onChange={onChange}\n            name=\"email\"\n          />\n          <TextInput\n            labelText=\"password :\"\n            value={form.password}\n            onChange={onChange}\n            name=\"password\"\n          />\n          <SubmitButton text=\"Log in\" />\n        </form>\n        <div className=\"login__buttons\">\n          <div className=\"login__buttons__header \">\n            <span className=\"line\" />\n            <span>Or connect with</span>\n            <span className=\"line\" />\n          </div>\n          <div className=\"login__icons\">\n            <div className=\"login__icons__icon  flex-c\">\n              <span className=\"icon-google google \" />\n              {user ? (\n                <div\n                  className=\"login__buttons__button google\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={signOut}\n                >\n                  Sign out\n                </div>\n              ) : (\n                <div\n                  className=\"login__buttons__button google\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={loginGoogle}\n                >\n                  Google\n                </div>\n              )}\n            </div>\n            <div className=\"login__icons__icon flex-c\">\n              <span className=\"icon-facebook-squared facebook \" />\n              {user ? (\n                <div\n                  className=\"login__buttons__button facebook\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={signOut}\n                >\n                  Sign out\n                </div>\n              ) : (\n                <div\n                  className=\"login__buttons__button facebook\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={loginFacebook}\n                >\n                  Facebook\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <footer className=\"footer\">\n        New?\n        <Link to=\"register\" className=\"footer__link\">\n          Sign up for FREE!\n        </Link>\n      </footer>\n    </>\n  );\n};\n\nLoginForm.propTypes = {\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  error: PropTypes.shape({\n    formError: PropTypes.string,\n  }),\n  form: PropTypes.shape({\n    email: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n  }),\n  loginGoogle: PropTypes.func.isRequired,\n  signOut: PropTypes.func.isRequired,\n  loginFacebook: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default LoginForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { withRouter } from 'react-router-dom';\nimport {\n  firestore,\n  auth,\n  loginGoogle,\n  loginFacebook,\n  signOutUser,\n} from '../../firebase-config';\nimport LoginForm from '../../components/LoginForm/LoginForm';\nimport * as userActions from '../../redux/actions/userActions';\n\nconst LoginPage = ({\n  user,\n  history,\n  loginUserWithSocials,\n  loginUserWithForm,\n  logOutUser,\n}) => {\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n  const [authUser] = useAuthState(auth);\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    if (authUser !== null && user === null) {\n      loginUserWithSocials(authUser);\n    }\n    if (authUser === null && user === null) {\n      loginUserWithForm();\n    }\n  }, [authUser]);\n  const signOut = () => {\n    signOutUser(logOutUser);\n  };\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n\n    setForm((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const userRef = firestore\n      .collection('users')\n      .where('email', '==', form.email)\n      .where('password', '==', form.password);\n    userRef.get().then((docs) => {\n      if (!docs.empty) {\n        const user = docs.docs[0].data();\n        loginUserWithForm({ user, method: 'set' });\n        history.push('/');\n      } else {\n        setErrors({\n          formError:\n            'We cannot find an account with that email address and password',\n        });\n      }\n    });\n  };\n\n  return (\n    <>\n      <div className=\"loginPage__wrapper\">\n        <LoginForm\n          form={form}\n          onChange={handleChange}\n          onSubmit={handleSubmit}\n          user={user}\n          loginGoogle={loginGoogle}\n          signOut={signOut}\n          loginFacebook={loginFacebook}\n          errors={errors}\n        />\n      </div>\n    </>\n  );\n};\n\nconst mapDispatchToProps = {\n  logOutUser: userActions.logOutUser,\n  loginUserWithSocials: userActions.loginUserWithSocials,\n  loginUserWithForm: userActions.loginUserWithForm,\n};\n\nfunction mapStateToProps(state) {\n  const { user } = state;\n  return {\n    user,\n  };\n}\n\nLoginPage.propTypes = {\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }),\n  loginUserWithSocials: PropTypes.func.isRequired,\n  loginUserWithForm: PropTypes.func.isRequired,\n  logOutUser: PropTypes.func.isRequired,\n};\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(LoginPage)\n);\n","import { useReducer, useEffect } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultState = function (defaultValue) {\r\n    return {\r\n        loading: defaultValue === undefined || defaultValue === null,\r\n        value: defaultValue,\r\n    };\r\n};\r\nvar reducer = function () { return function (state, action) {\r\n    switch (action.type) {\r\n        case 'error':\r\n            return __assign({}, state, { error: action.error, loading: false, value: undefined });\r\n        case 'reset':\r\n            return defaultState(action.defaultValue);\r\n        case 'value':\r\n            return __assign({}, state, { error: undefined, loading: false, value: action.value });\r\n        default:\r\n            return state;\r\n    }\r\n}; };\r\nvar useLoadingValue = (function (getDefaultValue) {\r\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n    var _a = useReducer(reducer(), defaultState(defaultValue)), state = _a[0], dispatch = _a[1];\r\n    var reset = function () {\r\n        var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n        dispatch({ type: 'reset', defaultValue: defaultValue });\r\n    };\r\n    var setError = function (error) {\r\n        dispatch({ type: 'error', error: error });\r\n    };\r\n    var setValue = function (value) {\r\n        dispatch({ type: 'value', value: value });\r\n    };\r\n    return {\r\n        error: state.error,\r\n        loading: state.loading,\r\n        reset: reset,\r\n        setError: setError,\r\n        setValue: setValue,\r\n        value: state.value,\r\n    };\r\n});\n\nvar useAuthState = (function (auth) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    useEffect(function () {\r\n        var listener = auth.onAuthStateChanged(setValue, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\nexport { useAuthState };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst SubmitButton = ({ text }) => {\n  return (\n    <>\n      <button type=\"submit\" className=\"form__button\">\n        <span>{text}</span>\n      </button>\n    </>\n  );\n};\n\nSubmitButton.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default SubmitButton;\n"],"sourceRoot":""}