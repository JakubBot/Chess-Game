(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{45:function(e,a){},46:function(e,a){e.exports="data:image/png;base64,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"},48:function(e,a,t){e.exports=t(79)},53:function(e,a,t){},64:function(e,a,t){},66:function(e,a,t){},68:function(e,a,t){},69:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(30),c=t.n(r),s=(t(53),t(10)),i=t(7),l=t(8),m=t(4),u=t(17),d=t(3),f=t(26),p=t(34),b=t.n(p),v=t(25),g=t(22);t(80),t(62);g.a.initializeApp({apiKey:"AIzaSyCWNcsnLzCTiD2ckKYjPFOOnSU_am3IOBc",authDomain:"chess-website-b9199.firebaseapp.com",projectId:"chess-website-b9199",storageBucket:"chess-website-b9199.appspot.com",messagingSenderId:"223317395203",appId:"1:223317395203:web:d81cf77519987424260b36",measurementId:"G-XJQS56VDHX"});var E=g.a.firestore(),_=g.a.auth(),h=new g.a.auth.GoogleAuthProvider,N=new g.a.auth.FacebookAuthProvider,w=function(){_.signInWithPopup(h)},O=function(){_.signInWithPopup(N)},k=function(e){_.signOut().then((function(){return e()}))},j=g.a;function S(e,a){var t=a.p1_token,n=a.p2_token;return e===t?1:e===n?2:0}var C=function(){return window.location?"".concat(window.location.origin).concat("/Chess-Game"):window.location};var y=t(12),T=t.n(y),A=(t(64),function(e){var a,t,n=e.songRef,r=e.links,c=e.adress,s=e.removeLink,i=e.user,l=e.whiteTime,m=e.blackTime,u=e.playerNum;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"userInformations"},o.a.createElement("div",{className:"userWrapper"},o.a.createElement("span",{className:"playerName"},null!==(a=null===i||void 0===i?void 0:i.userName)&&void 0!==a?a:"Guest 120"),o.a.createElement("span",{className:"points"},"(500)")),o.a.createElement("div",{className:"timer"},1===u?m:2===u?l:"5: 00")),o.a.createElement("div",{id:"board",className:"board"}),o.a.createElement("div",{className:"userInformations"},o.a.createElement("div",{className:"userWrapper"},o.a.createElement("span",{className:"playerName"},null!==(t=null===i||void 0===i?void 0:i.userName)&&void 0!==t?t:"Guest 152"),o.a.createElement("span",{className:"points"},"(500)")),o.a.createElement("div",{className:"timer"},1===u?l:2===u?m:"5: 00")),!0===r&&o.a.createElement("div",{className:"links"},o.a.createElement("h3",{className:"links__header"},"Second player Link"),o.a.createElement("div",{className:"links__link"},o.a.createElement("a",{target:"_blank",rel:"noreferrer",href:c.secondPlayer},c.secondPlayer)),o.a.createElement("div",{className:"closeButton",role:"button",tabIndex:0,onClick:s},"X"))),o.a.createElement("audio",{id:"myAudio",ref:n},o.a.createElement("source",{src:"https://images.chesscomfiles.com/chess-themes/sounds/_WEBM_/default/game-start.webm",type:"audio/webm"}),o.a.createElement("source",{src:"https://images.chesscomfiles.com/chess-themes/sounds/_OGG_/default/game-start.ogg",type:"audio/ogg"}),o.a.createElement("source",{src:"https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/game-start.mp3",type:"audio/mpeg"}),o.a.createElement("source",{src:"https://images.chesscomfiles.com/chess-themes/sounds/_WAV_/default/game-start.wav",type:"audio/wav"})))});A.propType={songRef:T.a.object.isRequired,p1_token:T.a.number.isRequired,p2_token:T.a.number.isRequired,links:T.a.bool.isRequired,user:T.a.shape({points:T.a.number,userName:T.a.string,photo:T.a.string})};var B=A,I=window.jQuery,x=function(e){var a=e.songRef,t=e.p1_token,n=e.p2_token,r=e.links,c=e.user,s=e.timeLeft,i=e.playerNum,l={firstPlayer:"".concat(C(),"/play/").concat(t),secondPlayer:"".concat(C(),"/play/").concat(n)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,a=Math.floor(e/60),t=Math.floor(e-60*a);return"".concat(a,": ").concat(t<10?"0".concat(t):t)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(B,{whiteTime:m(null===s||void 0===s?void 0:s.whiteTime),blackTime:m(null===s||void 0===s?void 0:s.blackTime),playerNum:i,adress:l,removeLink:function(){I(".links").css("display","none")},songRef:a,links:r,user:c}))},G=window.jQuery;function P(){G("#board .square-55d63").removeClass("square")}function M(e){G("#board .square-".concat(e)).addClass("square")}function F(e,a){return!("w"===e&&-1!==a.search(/^b/))||"b"===e&&-1!==a.search(/^w/)}function R(e,a){var t=e.moves({square:a,verbose:!0});if(0!==t.length)for(var n=0;n<t.length;n+=1)M(t[n].to)}function U(e,a,t,n,o,r,c,s,i){var l="b"===e?"Black":"White";return i?"Draw by stalemate":c?"Draw by repetition":s?"Draw by insufficient material":n?"Draw position":r?"".concat(l," in checkmate, gameover"):o?"".concat(l," in check"):a>0?t?"Your Turn":"Opponent's move":"View Only"}function W(e,a){return 1===e&&"w"===a||2===e&&"b"===a}var D=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:28,a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n+=1)a+=t.charAt(Math.floor(Math.random()*t.length));return a},L=window.jQuery,q=null,J=null;var H,V=Object(l.f)((function(e){var a=e.boardType,t=e.piece,r=e.user,c=e.updateMoves,s=e.updateStatusText,i=Object(f.a)(e,["boardType","piece","user","updateMoves","updateStatusText"]),l=Object(n.useState)(new b.a),u=Object(m.a)(l,1)[0],p=Object(n.useState)({token:i.match.params.token}),g=Object(m.a)(p,2),_=g[0],h=g[1],N=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=null;return _.isGameActive&&(e=setInterval((function(){!function(e,a){var t=e.id,n=E.collection("games").doc(t);"w"===a.turn()?n.update({"timeLeft.whiteTime":j.firestore.FieldValue.increment(-1)}):n.update({"timeLeft.blackTime":j.firestore.FieldValue.increment(-1)})}(_,u)}),1e3)),function(){return clearInterval(e)}}),[_.isGameActive,_.timeLeft]),Object(n.useEffect)((function(){var e,n;return e=_.token,n=function(e,n){!function(e,n){var o=u,r=S(_.token,n);o.load(n.fen||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),J?W(r,o.turn())&&J.position(o.fen()):(J=function(e,n){var o=u,r=S(_.token,n),c={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(t,"/{piece}.png"),draggable:!0,position:"start",onDragStart:function(e,a){return R(u,e),L('img[data-piece="'.concat(a,'"]')).addClass("z-index"),!o.game_over()&&W(r,o.turn())&&F(o.turn(),a)},onDrop:function(a,t,n){L('img[data-piece="'.concat(n,'"]')).removeClass("z-index"),P();var c=u.move({from:a,to:t,promotion:"q"});if(null===c)return"snapback";var s=E.collection("games").doc(e);1===r?s.update({fen:o.fen(),whiteSan:c.san,isGameActive:!0}):2===r&&s.update({fen:o.fen(),blackSan:c.san})},onSnapEnd:function(){return N.current.play(),J.position(o.fen())},onMouseoutSquare:P,onMouseoverSquare:function(e){W(r,o.turn())&&R(u,e)}};J=Object(v.a)("board",c),2===r&&J.orientation("black");var s=L(".chessboard-63f37"),i=L(".square-55d63");return"wooden"===a?(s.addClass("woodenBoard"),i.addClass("transparent")):"classic"===J&&(s.removeClass("woodenBoard"),i.removeClass("transparent")),L(window).resize(J.resize),J}(e,n)).position(o.fen())}(e,n),function(e,a){var t=a.p1_token,n=a.p2_token,o=a.whiteSan,r=a.blackSan,c=a.timeLeft,s=a.moveIndex,i=a.isGameActive,l=S(_.token,{p1_token:t,p2_token:n});h((function(a){return Object(d.a)(Object(d.a)({},a),{},{isGameActive:i,timeLeft:c,id:e,moveIndex:s,p1_token:t,p2_token:n,whiteSan:o,blackSan:r,statusText:U(u.turn(),l,W(l,u.turn()),u.in_draw(),u.in_check(),u.in_checkmate(),u.in_threefold_repetition(),u.insufficient_material(),u.in_stalemate())})}))}(e,n)},["p1_token","p2_token"].forEach((function(a){var t=E.collection("games").where(a,"==",e);q=t.onSnapshot((function(e){if(e.size){var a=e.docs.map((function(e){return{data:e.data(),id:e.id}})),t=Object(m.a)(a,1)[0];n(t.id,t.data)}}))})),function(){q()}}),[]),Object(n.useEffect)((function(){s(_.statusText)}),[_.statusText]),Object(n.useEffect)((function(){var e,a=_.whiteSan,t=_.blackSan;(a||t)&&c({whiteSan:a,blackSan:t,id:D(5),moveIndex:null!==(e=_.moveIndex)&&void 0!==e?e:1});var n=E.collection("games").doc(_.id);_.whiteSan&&_.blackSan&&n.update({whiteSan:"",blackSan:"",moveIndex:j.firestore.FieldValue.increment(1)})}),[_.whiteSan,_.blackSan]),o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{timeLeft:_.timeLeft,links:!0,songRef:N,p1_token:_.p1_token,p2_token:_.p2_token,user:r,playerNum:S(_.token,_)}))})),z=t(20),Y=(t(66),function(e){var a=e.moves;return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"moves"},Object(z.a)(a).reverse().map((function(e){var a=e.whiteSan,t=e.blackSan,n=e.moveIndex;return o.a.createElement("li",{className:"moves__item",key:e.id},o.a.createElement("span",{className:"index"},n),o.a.createElement("span",{className:"san"},a),o.a.createElement("span",{className:"san"},t))}))))}),Z=t(40),Q=t.n(Z),X=t(43),K=t(44),$=function(e){var a=e.message,t=a.uid,n=a.message,r=a.photoURL,c=t===e.user.uid?"sent":"received";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"message"},o.a.createElement("div",{className:"message ".concat(c)},o.a.createElement("div",{className:"userMessage ".concat(c)},n),o.a.createElement("img",{src:r,alt:"userPhoto"}))))},ee=(t(68),function(e){var a=e.loginGoogle,t=e.loginFacebook;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"emptyChat"},o.a.createElement("h4",null,"Login to use this chat"),o.a.createElement("div",{className:"emptyChat__icons  flex-c"},o.a.createElement("span",{className:"icon-google google "}),o.a.createElement("div",{className:"login__buttons__button google",role:"button",tabIndex:"0",onClick:a},"Google")),o.a.createElement("div",{className:"emptyChat__icons flex-c"},o.a.createElement("span",{className:"icon-facebook-squared facebook "}),o.a.createElement("div",{className:"login__buttons__button facebook",role:"button",tabIndex:"0",onClick:t},"Facebook"))))}),ae=(t(69),Object(n.forwardRef)((function(e,a){var t=e.messages,n=e.sendMessage,r=e.formValue,c=e.handleChange,s=e.user,i=e.loginGoogle,l=e.loginFacebook;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"scoreBoard__info__chat"},o.a.createElement("div",{className:"scoreBoard__info__header"},"Chat"),o.a.createElement("div",{className:"scoreBoard__info__options"},o.a.createElement("div",{className:"chat"},o.a.createElement("div",{className:"windowChat"},t.map((function(e){return o.a.createElement($,{key:e.id,user:s,message:e,uid:e.uid})})),o.a.createElement("span",{ref:a})),o.a.createElement("div",{className:"chatMessage"},o.a.createElement("form",{onSubmit:n},o.a.createElement("input",{type:"text",value:r,onChange:c,placeholder:"Aa"}),o.a.createElement("button",{type:"submit"},o.a.createElement("span",{role:"img","aria-label":"icon"},"\ud83d\udd4a\ufe0f")))),!s&&o.a.createElement(ee,{loginGoogle:i,loginFacebook:l})))))}))),te=null,ne=Object(l.f)((function(e){e.loginUser;var a=Object(f.a)(e,["loginUser"]),t=Object(n.useState)(""),r=Object(m.a)(t,2),c=r[0],s=r[1],i=Object(u.a)(_),l=Object(m.a)(i,1)[0],d=Object(n.useRef)(null),p=Object(n.useState)(""),b=Object(m.a)(p,2),v=b[0],g=b[1],h=Object(n.useState)([]),N=Object(m.a)(h,2),k=N[0],j=N[1];Object(n.useEffect)((function(){var e;return e=a.match.params.token,["p1_token","p2_token"].forEach((function(a){var t=E.collection("games").where(a,"==",e);te=t.onSnapshot((function(e){if(e.size){var a=e.docs.map((function(e){return{data:e.data(),id:e.id}})),t=Object(m.a)(a,1)[0],n=t.data.messages,o=t.id;n&&n.length>14&&function(e,a){var t=E.collection("games").doc(e),n=Object(K.a)(a).slice(1);t.update({messages:n})}(o,n),j(null!==n&&void 0!==n?n:[]),g(o)}}))})),function(){return te&&te()}}),[]);var S=function(){var e=Object(X.a)(Q.a.mark((function e(a){var t,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==c&&l){e.next=3;break}return e.abrupt("return");case 3:t=l.uid,n=l.photoURL,E.collection("games").doc(v).update({messages:[].concat(Object(z.a)(k),[{message:c,uid:t,photoURL:n,id:D(6)}])}).then((function(){s(""),window.innerWidth<1e3&&d.current.scrollIntoView({behavior:"smooth"})}));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,{messages:k,ref:d,sendMessage:S,user:l,formValue:c,handleChange:function(e){s(e.target.value)},loginGoogle:w,loginFacebook:O}))})),oe=(t(70),function(e){var a=e.moves,t=e.statusText,n=e.isOnline;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"scoreBoard"},o.a.createElement("div",{className:"scoreBoard__wrapper"},o.a.createElement("div",{className:"scoreBoard__header flex-c"},""===t?"Your turn":t),o.a.createElement("div",{className:"scoreBoard__info"},o.a.createElement("div",{className:"scoreBoard__info__moves"},o.a.createElement("div",{className:"scoreBoard__info__header"},"Last Moves"),o.a.createElement("div",{className:"scoreBoard__info__options"},0===a.length?o.a.createElement("div",{className:"dots"},o.a.createElement("span",{className:"dot"},"."),o.a.createElement("span",{className:"dot"},"."),o.a.createElement("span",{className:"dot"},".")):o.a.createElement(Y,{moves:a})),n&&o.a.createElement(ne,null))))))}),re={CHANGE_BOARD:"CHANGE_BOARD",CHANGE_PIECE:"CHANGE_PIECE",CHANGE_MODE:"CHANGE_MODE",LOGIN_USER:"LOGIN_USER_SUCCESS",LOG_OUT:"LOG_OUT",UPDATE_MOVES:"UPDATE_MOVES",STATUS_TEXT:"STATUS_TEXT",DEFAULT_BOARD_SETTINGS:"DEFAULT_BOARD_SETTINGS"};function ce(e){return{type:re.UPDATE_MOVES,move:e}}function se(e){return{type:re.STATUS_TEXT,statusText:e}}function ie(e){var a=e.userName,t=e.photo,n=e.uid,o=e.points,r=e.email,c=e.password;return{type:re.LOGIN_USER,userName:a,photo:t,uid:n,points:o,email:r,password:c}}function le(){return localStorage.setItem("user",null),{type:re.LOG_OUT}}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{method:"get",user:null};return function(a){var t=e.user;"set"===e.method?localStorage.setItem("user",JSON.stringify(t)):t=JSON.parse(localStorage.getItem("user")),t&&a(ie(t))}}function ue(e){return function(a){return E.collection("users").where("uid","==",e.uid).onSnapshot((function(t){var n=t.size,o=t.docs;if(1===n){var r=function(e){var a=e[0].data();return{uid:a.uid,points:a.points,userName:a.userName,photo:a.photo,email:a.email,password:a.password}}(o);a(ie(r))}else!function(e){var a=e.photoURL,t=e.displayName,n=e.uid;E.collection("users").add({uid:n,points:500,userName:t,photo:a})}(e)}))}}var de={updateMoves:ce,updateStatusText:se,loginUserWithSocials:ue,loginUserWithForm:me},fe=Object(s.b)((function(e){var a,t=e.boardInfo;return{moves:t.moves,statusText:t.statusText,piece:t.piece,board:t.board,user:null!==(a=e.user)&&void 0!==a?a:null}}),de)((function(e){var a=e.user,t=e.moves,r=e.statusText,c=e.piece,s=e.board,i=e.updateMoves,l=e.updateStatusText,d=e.loginUserWithSocials,f=e.loginUserWithForm,p=Object(u.a)(_),b=Object(m.a)(p,1)[0];return Object(n.useEffect)((function(){return null!==b&&null===a&&(H=d(b)),null===b&&null===a&&f(),function(){return H&&H()}}),[b]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"page__wrapper"},o.a.createElement(V,{user:a,piece:c,boardType:s,updateMoves:i,updateStatusText:l}),o.a.createElement(oe,{isOnline:!0,moves:t,statusText:r})))})),pe=(t(71),function(e){var a=e.changeBoard,t=e.changePiece,n=e.changeMode,r=e.createGame;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"configBoard"},o.a.createElement("div",{className:"configBoard__wrapper"},o.a.createElement("div",{className:"configBoard__header flex-c"},"Play Chess"),o.a.createElement("div",{className:"configBoard__config"},o.a.createElement("div",{className:"configBoard__config__board"},o.a.createElement("div",{className:"config__header"},"Your Board"),o.a.createElement("div",{className:"configBoard__options"},o.a.createElement("button",{type:"button",name:"wooden",className:"configBoard__options__btn configBoard__options__btn--active board__btn",onClick:a},"Wooden"),o.a.createElement("button",{type:"button",name:"classic",className:"configBoard__options__btn board__btn",onClick:a},"Classic"))),o.a.createElement("div",{className:"configBoard__config__pieces"},o.a.createElement("div",{className:"config__header"},"Your Pieces"),o.a.createElement("div",{className:"configBoard__options"},o.a.createElement("button",{type:"button",name:"neo_wood",className:"configBoard__options__btn--small configBoard__options__btn--active piece__btn",onClick:t},"Neo wood"),o.a.createElement("button",{type:"button",name:"alpha",className:"configBoard__options__btn configBoard__options__btn piece__btn",onClick:t},"Alpha"),o.a.createElement("button",{name:"uscf",onClick:t,type:"button",className:"configBoard__options__btn piece__btn"},"USCF"),o.a.createElement("button",{name:"classic",onClick:t,type:"button",className:"configBoard__options__btn piece__btn"},"Classic"))),o.a.createElement("div",{className:"mode"},o.a.createElement("div",{className:"config__header"},"Mode"),o.a.createElement("div",{className:"configBoard__options"},o.a.createElement("button",{onClick:n,type:"button",className:"configBoard__options__btn--big configBoard__options__btn--active mode__btn",name:"computer"},"with computer"),o.a.createElement("button",{onClick:n,type:"button",className:"configBoard__options__btn--big mode__btn",name:"online"},"with friend"))),o.a.createElement("div",{className:"findGame flex-c"},o.a.createElement("button",{type:"button",className:"findGame__button",onClick:r},"Find game"))))))}),be=window.jQuery,ve=Object(l.f)((function(e){e.board,e.piece;var a=e.mode,t=e.history,n=Object(f.a)(e,["board","piece","mode","history"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe,{changeBoard:function(e){var a=e.target,t=a;be(".board__btn").removeClass("configBoard__options__btn--active"),be(t).addClass("configBoard__options__btn--active");var o=a.name;n.changeBoard(o)},changePiece:function(e){var a=e.target,t=a;be(".piece__btn").removeClass("configBoard__options__btn--active"),be(t).addClass("configBoard__options__btn--active"),n.changePiece(a.name)},changeMode:function(e){var a=e.target,t=a;be(".mode__btn").removeClass("configBoard__options__btn--active"),be(t).addClass("configBoard__options__btn--active"),n.changeMode(a.name)},createGame:function(){var e={p1_token:D(8),p2_token:D(8),moveIndex:1,timeLeft:{whiteTime:300,blackTime:300}};"online"===a?E.collection("games").add(e).then((function(){return t.push("./play/".concat(e.p1_token))})).catch((function(e){throw e})):"computer"===a&&t.push("./play/computer")}}))})),ge=window.jQuery,Ee=null;var _e={changeBoard:function(e){return{type:re.CHANGE_BOARD,board:e}},changePiece:function(e){return{type:re.CHANGE_PIECE,piece:e}},changeMode:function(e){return{type:re.CHANGE_MODE,mode:e}},defaultBoardSettings:function(){return{type:re.DEFAULT_BOARD_SETTINGS}},loginUserWithSocials:ue,loginUserWithForm:me},he=Object(s.b)((function(e){var a=e.boardInfo,t=e.user;return{board:a.board,piece:a.piece,mode:a.mode,user:t}}),_e)((function(e){var a=e.user,t=e.board,r=e.piece,c=e.mode,s=e.changeBoard,i=e.changePiece,l=e.changeMode,d=e.defaultBoardSettings,f=e.loginUserWithSocials,p=e.loginUserWithForm,b=Object(u.a)(_),g=Object(m.a)(b,1)[0];Object(n.useEffect)((function(){return null!==g&&null===a&&(Ee=f(g)),null===g&&null===a&&p(),function(){return Ee&&Ee()}}),[g]),Object(n.useEffect)((function(){E()}),[t,r]),Object(n.useEffect)((function(){d()}),[]);var E=function(){var e={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(r,"/{piece}.png"),position:"start"},a=Object(v.a)("board",e),n=ge(".chessboard-63f37"),o=ge(".square-55d63");"wooden"===t?(n.addClass("woodenBoard"),o.addClass("transparent")):"classic"===t&&(n.removeClass("woodenBoard"),o.removeClass("transparent")),ge(window).resize(a.resize)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"page__wrapper"},o.a.createElement(x,null),o.a.createElement(ve,{board:t,piece:r,mode:c,changeBoard:s,changePiece:i,changeMode:l})))})),Ne=t(24),we=(t(72),function(e){var a=e.value,t=e.errors,n=e.name,r=e.labelText,c=e.placeHolder,s=e.onChange;return o.a.createElement("div",{className:"form__item"},o.a.createElement("label",{className:"form__item__header",htmlFor:n},r),o.a.createElement("input",{type:"text",id:n,value:a,onChange:s,name:n,className:"form__item__input",placeholder:c}),t&&o.a.createElement("span",{className:"form__item__error"},t))}),Oe=(t(73),function(e){var a=e.text;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"submit",className:"form__button"},o.a.createElement("span",null,a)))}),ke=(t(74),function(e){var a=e.user,t=e.errors,n=e.loginGoogle,r=e.signOut,c=e.loginFacebook,s=e.onChange,l=e.form,m=e.onSubmit;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"login"},o.a.createElement("form",{className:"login__form",onSubmit:m},o.a.createElement("span",{className:"formError"},t.formError&&t.formError),o.a.createElement(we,{labelText:"email :",value:l.email,onChange:s,name:"email"}),o.a.createElement(we,{labelText:"password :",value:l.password,onChange:s,name:"password"}),o.a.createElement(Oe,{text:"Log in"})),o.a.createElement("div",{className:"login__buttons"},o.a.createElement("div",{className:"login__buttons__header "},o.a.createElement("span",{className:"line"}),o.a.createElement("span",null,"Or connect with"),o.a.createElement("span",{className:"line"})),o.a.createElement("div",{className:"login__icons"},o.a.createElement("div",{className:"login__icons__icon  flex-c"},o.a.createElement("span",{className:"icon-google google "}),a?o.a.createElement("div",{className:"login__buttons__button google",role:"button",tabIndex:"0",onClick:r},"Sign out"):o.a.createElement("div",{className:"login__buttons__button google",role:"button",tabIndex:"0",onClick:n},"Google")),o.a.createElement("div",{className:"login__icons__icon flex-c"},o.a.createElement("span",{className:"icon-facebook-squared facebook "}),a?o.a.createElement("div",{className:"login__buttons__button facebook",role:"button",tabIndex:"0",onClick:r},"Sign out"):o.a.createElement("div",{className:"login__buttons__button facebook",role:"button",tabIndex:"0",onClick:c},"Facebook"))))),o.a.createElement("footer",{className:"footer"},"New?",o.a.createElement(i.b,{to:"register",className:"footer__link"},"Sign up for FREE!")))}),je=null,Se={logOutUser:le,loginUserWithSocials:ue,loginUserWithForm:me};var Ce,ye=Object(l.f)(Object(s.b)((function(e){return{user:e.user}}),Se)((function(e){var a=e.user,t=e.history,r=e.loginUserWithSocials,c=e.loginUserWithForm,s=e.logOutUser,i=Object(n.useState)({email:"",password:""}),l=Object(m.a)(i,2),f=l[0],p=l[1],b=Object(u.a)(_),v=Object(m.a)(b,1)[0],g=Object(n.useState)({}),h=Object(m.a)(g,2),N=h[0],j=h[1];Object(n.useEffect)((function(){return null!==v&&null===a&&(je=r(v)),null===v&&null===a&&c(),function(){return je&&je()}}),[v]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"loginPage__wrapper"},o.a.createElement(ke,{form:f,onChange:function(e){var a=e.target,t=a.name,n=a.value;p((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(Ne.a)({},t,n))}))},onSubmit:function(e){e.preventDefault();var a=E.collection("users").where("email","==",f.email).where("password","==",f.password);je=a.onSnapshot((function(e){if(e.empty)j({formError:"We cannot find an account with that email address and password"});else{var a=e.docs[0].data();c({user:a,method:"set"}),t.push("/")}}))},user:a,loginGoogle:w,signOut:function(){k(s)},loginFacebook:O,errors:N})))}))),Te=(t(75),function(e){var a=e.form,t=e.onChange,n=e.errors,r=e.onSubmit;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"register"},o.a.createElement("header",{className:"register__header"},"Join Now",o.a.createElement("span",{className:"small-dash"},"\u2014"),o.a.createElement("span",{className:"italic"},"Free & Easy!")),o.a.createElement("form",{className:"register__form",onSubmit:r},o.a.createElement(we,{value:a.userName,name:"userName",onChange:t,labelText:"username :",errors:n.userName}),o.a.createElement(we,{value:a.email,name:"email",onChange:t,labelText:"email :",errors:n.email}),o.a.createElement(we,{value:a.password,name:"password",onChange:t,labelText:"password :",errors:n.password}),o.a.createElement(Oe,{text:"Register"}))),o.a.createElement("footer",{className:"footer"},"Have an account?",o.a.createElement(i.b,{to:"login",className:"footer__link"},"log in here")))});var Ae={loginUserWithSocials:ue,loginUserWithForm:me},Be=Object(l.f)(Object(s.b)((function(e){return{user:e.user}}),Ae)((function(e){var a=e.user,t=e.history,r=e.loginUserWithForm,c=e.loginUserWithSocials,s=Object(n.useState)({userName:"",email:"",password:""}),i=Object(m.a)(s,2),l=i[0],f=i[1],p=Object(n.useState)({}),b=Object(m.a)(p,2),v=b[0],g=b[1],h=Object(u.a)(_),N=Object(m.a)(h,1)[0];Object(n.useEffect)((function(){return null!==N&&null===a&&(Ce=c(N)),null===N&&null===a&&r(),function(){return Ce&&Ce()}}),[N]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"registerPage__wrapper"},o.a.createElement(Te,{onChange:function(e){var a=e.target,t=a.name,n=a.value;f((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(Ne.a)({},t,n))}))},onSubmit:function(e){if(e.preventDefault(),function(){var e=l.userName,a=l.email,t=l.password,n={};return 0===e.length?n.userName="User name is required":e.length<3?n.userName="User name has to be longer than 3 characters":e.length>10&&(n.userName="User name has to be shorter than 10 characters"),0===a.length?n.email="Email is required":/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.toLocaleLowerCase())||(n.email="Please enter a valid email address."),0===t.length?n.password="Password is required":t.length<3?n.password="Password has to be longer than 3 characters":t.length>10&&(n.password="Password has to be shorter than 10 characters"),g(n),0===Object.keys(n).length}()){var a=D(),n=l.userName,o={email:l.email,password:l.password,uid:a,userName:n,photo:"https://betacssjs.chesscomfiles.com/bundles/web/images/white_400.09ae248e.png",points:500};E.collection("users").add(o).then((function(){r({user:o,method:"set"})})),f({userName:"",email:"",password:""}),t.push("/")}},form:l,errors:v})))}))),Ie=t(45),xe=t.n(Ie);function Ge(e,a,t){if(null===e)return 0;var n={p:[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,-.5,-1,0,0,-1,-.5,.5],[.5,1,1,-2,-2,1,1,.5],[0,0,0,0,0,0,0,0]],n:[[-5,-4,-3,-3,-3,-3,-4,-5],[-4,-2,0,0,0,0,-2,-4],[-3,0,1,1.5,1.5,1,0,-3],[-3,.5,1.5,2,2,1.5,.5,-3],[-3,0,1.5,2,2,1.5,0,-3],[-3,.5,1,1.5,1.5,1,.5,-3],[-4,-2,0,.5,.5,0,-2,-4],[-5,-4,-3,-3,-3,-3,-4,-5]],b:[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],r:[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],q:[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],k:[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]]}[e.type],o={p:10,n:30,b:35,r:50,q:90,k:900}[e.type];return"w"===e.color?o+=n[a][t]:o+=n[7-a][t],"w"===e.color?o:-o}function Pe(e,a,t,n,o){var r=e.moves(),c=r.length;if(0===a)return-function(e){for(var a=0,t=0;t<8;t++)for(var n=0;n<8;n++)a+=Ge(e[t][n],t,n);return a}(e.board());if(t){for(var s=-1/0,i=0;i<c;i++)if(e.move(r[i]),s=Math.max(s,Pe(e,a-1,!t,n,o)),e.undo(),(n=Math.max(n,s))>=o)return s;return s}for(var l=1/0,m=0;m<c;m++)if(e.move(r[m]),l=Math.min(l,Pe(e,a-1,!t,n,o)),e.undo(),n>=(o=Math.min(o,l)))return l;return l}var Me,Fe="https://betacssjs.chesscomfiles.com/bundles/web/images/white_400.09ae248e.png",Re=function(e){var a=e.status,t=e.photo,n=void 0===t?Fe:t,r=e.points,c=e.deleteCard;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"endGameCard"},o.a.createElement("div",{className:"endGameCard__close"},o.a.createElement("button",{className:"endGameCard__close__button",type:"button",onClick:c},"\u2718")),o.a.createElement("div",{className:"wrapper"},o.a.createElement("h3",{className:"wrapper__header"},a),o.a.createElement("div",{className:"wrapper__images"},o.a.createElement("img",{src:n,alt:"userImage",className:"wrapper__image ".concat("You won"===a?"win__border":"lose__border")}),o.a.createElement("img",{src:Fe,alt:"userImage",className:"wrapper__image ".concat("You lost"===a?"win__border":"lose__border")})),o.a.createElement("div",{className:"wrapper__rating"},o.a.createElement("h3",{className:"wrapper__rating__header"},"Rating"),o.a.createElement("div",{className:"wrapper__rating__points"},o.a.createElement("span",{className:"wrapper__rating__point"},r),o.a.createElement("span",{className:"wrapper__rating__change"},"You won"===a?"+8":"-8"))))))},Ue=(t(76),window.jQuery),We=function(e){var a=e.timeLeft,t=e.turn,r=e.playerNum,c=void 0===r?1:r,s=e.user;function i(){if(1===c){if(0===a.blackTime||"b"===t)return"You won";if(0===a.whiteTime||"w"===t)return"You lost"}if(2===c){if(0===a.whiteTime||"w"===t)return"You won";if(0===a.blackTime||"b"===t)return"You lost"}}Object(n.useEffect)((function(){if(s){var e=E.collection("users").where("uid","==",s.uid),a=i();return e.get().then((function(e){if(1===e.size){var t=Object(m.a)(e.docs,1)[0].id;"You won"===a?E.collection("users").doc(t).update({points:j.firestore.FieldValue.increment(8)}):E.collection("users").doc(t).update({points:j.firestore.FieldValue.increment(-8)})}})),function(){return null}}}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Re,{deleteCard:function(){Ue(".endGameCard").css("display","none")},status:i(),photo:null===s||void 0===s?void 0:s.photo,points:null===s||void 0===s?void 0:s.points}))},De=window.jQuery,Le=null,qe=new b.a;var Je={updateMoves:ce,updateStatusText:se,loginUserWithSocials:ue,loginUserWithForm:me},He=Object(s.b)((function(e){var a=e.boardInfo,t=a.piece,n=a.board,o=a.moves,r=a.statusText;return{piece:t,boardType:n,user:e.user,moves:o,currentStatusText:r}}),Je)((function(e){var a=e.boardType,t=e.user,r=e.piece,c=e.updateMoves,s=e.updateStatusText,i=e.moves,l=e.currentStatusText,f=e.loginUserWithSocials,p=e.loginUserWithForm,b=e.updateUserPoints,g=Object(u.a)(_),E=Object(m.a)(g,1)[0],h=Object(n.useState)({whiteSan:"",blackSan:"",id:null,index:0}),N=Object(m.a)(h,2),w=N[0],O=N[1],k=Object(n.useState)({whiteTime:2222,blackTime:2222,isGameActive:!1}),j=Object(m.a)(k,2),S=j[0],C=j[1],y=Object(n.useState)(!1),T=Object(m.a)(y,2),A=T[0],B=T[1],I=Object(n.useRef)(null);function G(){var e=U(qe.turn(),1,W(1,qe.turn()),qe.in_draw(),qe.in_check(),qe.in_checkmate(),qe.in_threefold_repetition(),qe.insufficient_material(),qe.in_stalemate());s(e)}return Object(n.useEffect)((function(){return null!==E&&null===t&&(Me=f(E)),null===E&&null===t&&p(),function(){return Me&&Me()}}),[E]),Object(n.useEffect)((function(){C((function(e){return Object(d.a)(Object(d.a)({},e),{},{isGameActive:!1})}))}),[qe.game_over(),A]),Object(n.useEffect)((function(){var e=null;return S.isGameActive&&(e=setInterval((function(){"w"===qe.turn()?C((function(e){return Object(d.a)(Object(d.a)({},e),{},{whiteTime:e.whiteTime-1})})):C((function(e){return Object(d.a)(Object(d.a)({},e),{},{blackTime:e.blackTime-1})}))}),1e3)),(S.whiteTime<=0||S.blackTime<=0)&&(clearInterval(e),B(!0)),function(){return clearInterval(e)}}),[S.isGameActive,S]),Object(n.useEffect)((function(){if(w){var e=w.whiteSan,a=w.blackSan,t=w.index;""===e&&""===a||c({whiteSan:e,blackSan:a,index:t,id:D(5)}),""!==e&&""!==a&&O(Object(d.a)(Object(d.a)({},w),{},{whiteSan:"",blackSan:"",id:null}))}}),[w]),Object(n.useEffect)((function(){function e(){var e=function(e,a,t){for(var n,o=e.moves(),r=[],c=o.length,s=-1/0,i=0;i<c;i++){var l=o[i];r.push(e.move(l));var m=Pe(e,a-1,!t,-1/0,1/0);e.undo(),m>=s&&(s=m,n=l)}var u=r.find((function(e){return e.san===n}));return{bestMove:n,move:u}}(qe,2,!0),a=e.bestMove,t=e.move;O((function(e){return Object(d.a)(Object(d.a)({},e),{},{blackSan:null===t||void 0===t?void 0:t.san})})),qe.move(a),Le.position(qe.fen()),G()}I.current.play();var t={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(r,"/{piece}.png"),draggable:!0,position:"start",onDragStart:function(e,a){return R(qe,e),!qe.game_over()&&"w"===qe.turn()&&F(qe.turn(),a)},onDrop:function(a,t){P();var n=qe.move({from:a,to:t,promotion:"q"});if(null===n)return"snapback";window.setTimeout(e,200),O((function(e){return Object(d.a)(Object(d.a)({},e),{},{whiteSan:null===n||void 0===n?void 0:n.san,index:e.index+1})})),C((function(e){return Object(d.a)(Object(d.a)({},e),{},{isGameActive:!0})}))},onSnapEnd:function(){I.current.play(),Le.position(qe.fen()),G()},onMouseoutSquare:P,onMouseoverSquare:function(e){R(qe,e)}};Le=Object(v.a)("board",t),De(window).resize(Le.resize);var n=De(".chessboard-63f37"),o=De(".square-55d63");"wooden"===a?(n.addClass("woodenBoard"),o.addClass("transparent")):"classic"===Le&&(n.removeClass("woodenBoard"),o.removeClass("transparent")),G()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"page__wrapper"},(qe.game_over()||A)&&o.a.createElement(We,{timeLeft:S,turn:qe.turn(),user:t,updateUserPoints:b}),o.a.createElement(x,{timeLeft:S,songRef:I,links:!1,playerNum:1}),o.a.createElement(oe,{moves:i,statusText:l})))})),Ve=function(e){var a=e.message,t=e.uid,n=e.photoURL,r=t===e.userUID?"sent":"received";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"floated__chat__item ".concat(r)},o.a.createElement("div",{className:"floated__chat__message ".concat(r)},o.a.createElement("span",{className:"floated__chat__userMessage"},a)),o.a.createElement("img",{src:n,alt:"userPhoto"})))},ze=(t(77),Object(n.forwardRef)((function(e,a){var t=e.messages,n=e.user,r=e.formMessage,c=e.onClick,s=e.onChange,i=e.onSubmit,l=e.loginGoogle,m=e.loginFacebook;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"floated"},o.a.createElement("button",{type:"button",className:"floatedButton",onClick:c},o.a.createElement("span",{className:"floatedButton__icon",name:"floatedButton__icon"},"+")),o.a.createElement("div",{className:"floated__chat"},o.a.createElement("h3",{className:"floated__chat__header"},"Say Hello To World!"),o.a.createElement("ul",{className:"floated__chat__list"},n?t.map((function(e){var a=e.message,t=e.uid,r=e.photoURL,c=e.docId;return o.a.createElement(Ve,{message:a,uid:t,key:c,photoURL:r,userUID:n.uid})})):o.a.createElement(ee,{loginGoogle:l,loginFacebook:m}),o.a.createElement("span",{ref:a})),o.a.createElement("form",{className:"floated__form",onSubmit:i},o.a.createElement(we,{onChange:s,value:r,placeHolder:"Aa"}),o.a.createElement("button",{type:"submit",className:"floated__form__button"},o.a.createElement("svg",{viewBox:"0 0 24 24",height:"20px",width:"20px"},o.a.createElement("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fillRule:"evenodd",stroke:"none"})))))))}))),Ye=window.jQuery,Ze=null;var Qe=Object(s.b)((function(e){return{user:e.user}}),null)((function(e){var a=e.user,t=Object(n.useState)(""),r=Object(m.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)([]),l=Object(m.a)(i,2),u=l[0],d=l[1],f=Object(n.useRef)(null);Object(n.useEffect)((function(){return function(){var e=E.collection("globalMessages");Ze=e.orderBy("createdAt","asc").onSnapshot((function(e){if(e.size){var a=e.docs.map((function(e){var a=e.data();return{message:a.message,uid:a.uid,photoURL:a.photoURL,docId:e.id}})),t=a[0];if(a.length>12)return void p(t.docId);d(a)}}))}(),function(){return Ze&&Ze()}}),[]);var p=function(e){E.collection("globalMessages").doc(e).delete()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ze,{onClick:function(e){f.current.scrollIntoView({behavior:"smooth"}),"floatedButton__icon"===Ye(e.target).attr("name")&&Ye(".floated").toggleClass("active")},onChange:function(e){s(e.target.value)},formMessage:c,onSubmit:function(e){(e.preventDefault(),""!==c&&a)&&(E.collection("globalMessages").add({message:c,uid:a.uid,photoURL:a.photo,createdAt:j.firestore.FieldValue.serverTimestamp()}),s(""),f.current.scrollIntoView({behavior:"smooth"}))},messages:u,user:a,ref:f,loginGoogle:w,loginFacebook:O}))})),Xe=t(46),Ke=t.n(Xe),$e=(t(78),function(e){var a=e.user,t=e.onClick,n=e.signOut;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"menu-btn",role:"button",tabIndex:"0",onClick:t},o.a.createElement("div",{className:"menu-btn__burger"})),o.a.createElement("div",{className:"menu__socials"},o.a.createElement("span",{className:"icon-home icon"}),o.a.createElement("span",{className:"icon-twitter-squared icon"}),o.a.createElement("span",{className:"icon-facebook-squared icon"}),o.a.createElement("span",{className:"icon-cog icon"})),o.a.createElement("div",{className:"navbar","aria-hidden":"true"},o.a.createElement("div",{className:"navbar__menu "},o.a.createElement("img",{src:Ke.a,className:"menu__logo",alt:"logo"}),o.a.createElement("div",{className:"navbar__menu__item"},o.a.createElement("span",{className:"icon-home icon"}),o.a.createElement(i.b,{to:"/"},"Home")),o.a.createElement("div",{className:"navbar__menu__item"},o.a.createElement("span",{className:"icon-gamepad icon"}),o.a.createElement(i.b,{to:"/"},"Play")),o.a.createElement("div",{className:"navbar__menu__item "},o.a.createElement("span",{className:"icon-puzzle icon"}),o.a.createElement(i.b,{to:"/"},"Puzzles")),o.a.createElement("div",{className:"navbar__menu__item"},o.a.createElement("span",{className:"icon-graduation-cap icon"}),o.a.createElement(i.b,{to:"/"},"Learn")),o.a.createElement("div",{className:"navbar__menu__item"},o.a.createElement("span",{className:"icon-dot-3 icon"}),o.a.createElement(i.b,{to:"/"},"More"))),a?o.a.createElement("div",{className:"buttons"},o.a.createElement("div",{className:"buttons__sign"},o.a.createElement("button",{type:"button",className:"buttons__item flex-c-c",onClick:n},o.a.createElement("span",null,"Sign Out")))):o.a.createElement("div",{className:"buttons"},o.a.createElement("div",{className:"buttons__sign"},o.a.createElement(i.b,{to:"/login"},o.a.createElement("button",{type:"button",className:"buttons__item flex-c-c"},o.a.createElement("span",null,"Sign In")))),o.a.createElement("div",{className:"buttons__sign"},o.a.createElement(i.b,{to:"/register"},o.a.createElement("button",{type:"button",className:"buttons__item flex-c-c"},o.a.createElement("span",null,"Sign Up"))))),o.a.createElement("div",{className:"navbar__menu--bottom"},o.a.createElement("div",{className:"navbar__menu__item--small "},o.a.createElement("span",{className:"icon-resize-horizontal icon"}),o.a.createElement(i.b,{to:"/"},"Collapse")),o.a.createElement("div",{className:"navbar__menu__item--small icon"},o.a.createElement("span",{className:"icon-cog"}),o.a.createElement(i.b,{to:"/"},"Settings")),o.a.createElement("div",{className:"navbar__menu__item--small icon"},o.a.createElement("span",{className:"icon-help"}),o.a.createElement(i.b,{to:"/"},"Help")))))}),ea=window.jQuery;var aa={logOutUser:le},ta=Object(s.b)((function(e){return{user:e.user}}),aa)((function(e){var a=e.user,t=e.logOutUser;return o.a.createElement(o.a.Fragment,null,o.a.createElement($e,{user:a,onClick:function(){if(!(ea(window).width()>576)){var e=ea(".menu-btn"),a=ea(".navbar");e.hasClass("open")?a.removeClass("showNavbar"):a.addClass("showNavbar"),e.toggleClass("open")}},signOut:function(){k(t)}}))})),na=t(19),oa=t(47),ra={boardInfo:{board:"wooden",piece:"neo_wood",mode:"computer",moves:[],statusText:""},user:null};var ca=Object(na.c)({boardInfo:function(){var e,a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra.boardInfo,n=arguments.length>1?arguments[1]:void 0,o=[];switch(((null===(e=n.move)||void 0===e?void 0:e.whiteSan)||(null===(a=n.move)||void 0===a?void 0:a.blackSan))&&(t.moves.length<4?(""!==n.move.whiteSan&&(o=[].concat(Object(z.a)(t.moves),[n.move])),""!==n.move.blackSan&&(o=[].concat(Object(z.a)(t.moves.slice(0,-1)),[n.move]))):o=[].concat(Object(z.a)(t.moves.slice(1,-1)),[n.move])),n.type){case re.CHANGE_BOARD:return Object(d.a)(Object(d.a)({},t),{},{board:n.board});case re.CHANGE_PIECE:return Object(d.a)(Object(d.a)({},t),{},{piece:n.piece});case re.CHANGE_MODE:return Object(d.a)(Object(d.a)({},t),{},{mode:n.mode});case re.UPDATE_MOVES:return Object(d.a)(Object(d.a)({},t),{},{moves:o});case re.STATUS_TEXT:return Object(d.a)(Object(d.a)({},t),{},{statusText:n.statusText});case re.DEFAULT_BOARD_SETTINGS:return Object(d.a)({},ra.boardInfo);default:return t}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra.user,a=arguments.length>1?arguments[1]:void 0,t=a.userName,n=a.uid,o=a.photo,r=a.points,c=a.email,s=a.password;switch(a.type){case re.LOGIN_USER:return Object(d.a)(Object(d.a)({},e),{},{userName:t,uid:n,photo:o,email:c,password:s,points:r});case re.LOG_OUT:return null;case re.UPDATE_USER_POINTS:return Object(d.a)(Object(d.a)({},e),{},{points:a.points});default:return e}}});var sa=function(e){var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||na.d;return Object(na.e)(ca,e,a(Object(na.a)(oa.a)))}();c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{store:sa},o.a.createElement("div",{className:"container"},o.a.createElement(i.a,{basename:"/Chess-Game"},o.a.createElement(Qe,null),o.a.createElement(ta,null),o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:he}),o.a.createElement(l.a,{path:"/login",component:ye}),o.a.createElement(l.a,{path:"/register",component:Be}),o.a.createElement(l.a,{exact:!0,path:"/play/computer",component:He}),o.a.createElement(l.a,{exact:!0,path:"/play/:token",component:fe}),o.a.createElement(l.a,{component:xe.a})))))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.1b6ee107.chunk.js.map