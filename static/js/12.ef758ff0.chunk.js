(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[12],{113:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(28),i=n(1),r=n.n(i),o=n(87),u=n.n(o),s=n(74),l=n.n(s),b=n(20),d=n(68),m=n(104),f=n(90),v=n(73),p=n(16),j=n(70),O=n(69),w=n(31),h=n(72),S=n(91),g=window.jQuery,T=null,k=new u.a;var _={updateMoves:h.e,updateStatusText:h.f,loginUserWithSocials:w.c,loginUserWithForm:w.b,updateLocalStorage:w.d};t.default=Object(b.b)((function(e){var t=e.boardInfo,n=t.piece,a=t.board,c=t.moves,i=t.statusText;return{piece:n,boardType:a,user:e.user,moves:c,currentStatusText:i}}),_)((function(e){var t=e.history,n=e.boardType,o=e.user,u=e.piece,s=e.updateMoves,b=e.updateStatusText,w=e.moves,h=e.currentStatusText,_=e.loginUserWithSocials,E=e.loginUserWithForm,x=e.updateLocalStorage,y=Object(d.a)(p.a),L=Object(c.a)(y,1)[0],C=Object(i.useState)({whiteSan:"",blackSan:"",id:null,index:0}),G=Object(c.a)(C,2),W=G[0],q=G[1],A=Object(i.useState)({whiteTime:300,blackTime:300,isGameActive:!1}),M=Object(c.a)(A,2),I=M[0],N=M[1],R=Object(i.useState)(!1),U=Object(c.a)(R,2),F=U[0],z=U[1],B=Object(i.useRef)(null),D=Object(i.useRef)(null);function J(){var e=Object(j.e)(k.turn(),1,Object(j.b)(1,k.turn()),k.in_draw(),k.in_check(),k.in_checkmate(),k.in_threefold_repetition(),k.insufficient_material(),k.in_stalemate());e.split(" ").includes("check")?D.current.play():B.current.play(),b(e)}return Object(i.useEffect)((function(){return null!==L&&null===o&&_(L),null===L&&null===o&&E(),function(){return k.reset()}}),[L]),Object(i.useEffect)((function(){N((function(e){return Object(a.a)(Object(a.a)({},e),{},{isGameActive:!1})}))}),[k.game_over(),F]),Object(i.useEffect)((function(){var e=null;return I.isGameActive&&(e=setInterval((function(){"w"===k.turn()?N((function(e){return Object(a.a)(Object(a.a)({},e),{},{whiteTime:e.whiteTime-1})})):N((function(e){return Object(a.a)(Object(a.a)({},e),{},{blackTime:e.blackTime-1})}))}),1e3)),(I.whiteTime<=0||I.blackTime<=0)&&(clearInterval(e),z(!0)),function(){return clearInterval(e)}}),[I.isGameActive,I]),Object(i.useEffect)((function(){if(W){var e=W.whiteSan,t=W.blackSan,n=W.index;""===e&&""===t||s({whiteSan:e,blackSan:t,index:n,id:Object(O.a)(5)}),""!==e&&""!==t&&q(Object(a.a)(Object(a.a)({},W),{},{whiteSan:"",blackSan:"",id:null}))}}),[W]),Object(i.useEffect)((function(){function e(){var e=2;window.innerWidth<520&&(N((function(e){return Object(a.a)(Object(a.a)({},e),{},{blackTime:e.blackTime-1})})),e=1);var t=Object(m.aiMove)(k.fen(),e),n=Object.keys(t)[0].toLocaleLowerCase(),c=Object.values(t)[0].toLocaleLowerCase(),i=k.move({from:n,to:c,promotion:"q"});q((function(e){return Object(a.a)(Object(a.a)({},e),{},{blackSan:null===i||void 0===i?void 0:i.san})})),T.position(k.fen()),J()}var t={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(u,"/{piece}.png"),draggable:!0,position:"start",onDragStart:function(e,t){return Object(j.c)(k,e),!k.game_over()&&"w"===k.turn()&&Object(j.a)(k.turn(),t)},onDrop:function(t,n){Object(j.d)();var c=k.move({from:t,to:n,promotion:"q"});if(null===c)return"snapback";window.innerWidth<520?window.setTimeout(e,2400):window.setTimeout(e,3200),q((function(e){return Object(a.a)(Object(a.a)({},e),{},{whiteSan:null===c||void 0===c?void 0:c.san,index:e.index+1})})),N((function(e){return Object(a.a)(Object(a.a)({},e),{},{isGameActive:!0})}))},onSnapEnd:function(){T.position(k.fen()),J()},onMouseoutSquare:j.d,onMouseoverSquare:function(e){Object(j.c)(k,e)}};T=l()("board",t),g(window).resize(T.resize);var c=g(".chessboard-63f37"),i=g(".square-55d63");"wooden"===n?(c.addClass("woodenBoard"),i.addClass("transparent")):"classic"===T&&(c.removeClass("woodenBoard"),i.removeClass("transparent")),J()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page__wrapper"},(k.game_over()||F)&&r.a.createElement(S.a,{timeLeft:I,turn:k.turn(),user:o}),r.a.createElement(v.a,{timeLeft:I,moveSongRef:B,checkSongRef:D,links:!1,playerNum:1,isGameEnded:k.game_over()||F,changeSite:t.push,updateLocalStorage:x,userName:null===o||void 0===o?void 0:o.userName,points:null===o||void 0===o?void 0:o.points,turn:k.turn()}),r.a.createElement(f.a,{moves:w,statusText:h})))}))}}]);
//# sourceMappingURL=12.ef758ff0.chunk.js.map