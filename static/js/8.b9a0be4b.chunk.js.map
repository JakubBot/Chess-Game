{"version":3,"sources":["../node_modules/react-firebase-hooks/auth/dist/index.esm.js","components/common/SubmitButton/index.js","components/LoginForm/LoginForm.js","containers/LoginPage/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","defaultState","defaultValue","loading","undefined","value","useLoadingValue","getDefaultValue","_a","useReducer","state","action","type","error","dispatch","reset","setError","setValue","useAuthState","auth","currentUser","useEffect","listener","onAuthStateChanged","SubmitButton","text","className","LoginForm","user","form","errors","signOut","loginFacebook","loginGoogle","onChange","onSubmit","formError","TextInput","labelText","email","name","password","role","tabIndex","onClick","to","mapDispatchToProps","logOutUser","userActions","loginUserWithSocials","loginUserWithForm","withRouter","connect","history","useState","setForm","authUser","setErrors","target","prevState","event","preventDefault","firestore","collection","where","get","then","docs","empty","data","method","push","signOutUser"],"mappings":"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","file":"static/js/8.b9a0be4b.chunk.js","sourcesContent":["import { useReducer, useEffect } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultState = function (defaultValue) {\r\n    return {\r\n        loading: defaultValue === undefined || defaultValue === null,\r\n        value: defaultValue,\r\n    };\r\n};\r\nvar reducer = function () { return function (state, action) {\r\n    switch (action.type) {\r\n        case 'error':\r\n            return __assign({}, state, { error: action.error, loading: false, value: undefined });\r\n        case 'reset':\r\n            return defaultState(action.defaultValue);\r\n        case 'value':\r\n            return __assign({}, state, { error: undefined, loading: false, value: action.value });\r\n        default:\r\n            return state;\r\n    }\r\n}; };\r\nvar useLoadingValue = (function (getDefaultValue) {\r\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n    var _a = useReducer(reducer(), defaultState(defaultValue)), state = _a[0], dispatch = _a[1];\r\n    var reset = function () {\r\n        var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n        dispatch({ type: 'reset', defaultValue: defaultValue });\r\n    };\r\n    var setError = function (error) {\r\n        dispatch({ type: 'error', error: error });\r\n    };\r\n    var setValue = function (value) {\r\n        dispatch({ type: 'value', value: value });\r\n    };\r\n    return {\r\n        error: state.error,\r\n        loading: state.loading,\r\n        reset: reset,\r\n        setError: setError,\r\n        setValue: setValue,\r\n        value: state.value,\r\n    };\r\n});\n\nvar useAuthState = (function (auth) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    useEffect(function () {\r\n        var listener = auth.onAuthStateChanged(setValue, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\nexport { useAuthState };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst SubmitButton = ({ text }) => {\n  return (\n    <>\n      <button type=\"submit\" className=\"form__button\">\n        <span>{text}</span>\n      </button>\n    </>\n  );\n};\n\nSubmitButton.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default SubmitButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport TextInput from '../common/TextInput';\nimport SubmitButton from '../common/SubmitButton';\nimport './LoginForm.scss';\n\nconst LoginForm = ({\n  user,\n  form,\n  errors,\n  signOut,\n  loginFacebook,\n  loginGoogle,\n  onChange,\n  onSubmit,\n}) => {\n  return (\n    <>\n      <div className=\"login\">\n        <form className=\"login__form\" onSubmit={onSubmit}>\n          <span className=\"formError\">\n            {errors.formError && errors.formError}\n          </span>\n          <TextInput\n            labelText=\"email :\"\n            value={form.email}\n            onChange={onChange}\n            name=\"email\"\n          />\n          <TextInput\n            labelText=\"password :\"\n            value={form.password}\n            onChange={onChange}\n            name=\"password\"\n          />\n          <SubmitButton text=\"Log in\" />\n        </form>\n        <div className=\"login__buttons\">\n          <div className=\"login__buttons__header \">\n            <span className=\"line\" />\n            <span>Or connect with</span>\n            <span className=\"line\" />\n          </div>\n          <div className=\"login__icons\">\n            <div className=\"login__icons__icon  flex-c\">\n              <span className=\"icon-google google \" />\n              {user ? (\n                <div\n                  className=\"login__buttons__button google\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={signOut}\n                >\n                  Sign out\n                </div>\n              ) : (\n                <div\n                  className=\"login__buttons__button google\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={loginGoogle}\n                >\n                  Google\n                </div>\n              )}\n            </div>\n            <div className=\"login__icons__icon flex-c\">\n              <span className=\"icon-facebook-squared facebook \" />\n              {user ? (\n                <div\n                  className=\"login__buttons__button facebook\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={signOut}\n                >\n                  Sign out\n                </div>\n              ) : (\n                <div\n                  className=\"login__buttons__button facebook\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={loginFacebook}\n                >\n                  Facebook\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <footer className=\"footer\">\n        New?\n        <Link to=\"register\" className=\"footer__link\">\n          Sign up for FREE!\n        </Link>\n      </footer>\n    </>\n  );\n};\n\nLoginForm.propTypes = {\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  error: PropTypes.shape({\n    formError: PropTypes.string,\n  }),\n  form: PropTypes.shape({\n    email: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n  }),\n  loginGoogle: PropTypes.func.isRequired,\n  signOut: PropTypes.func.isRequired,\n  loginFacebook: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default LoginForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { withRouter } from 'react-router-dom';\nimport {\n  firestore,\n  auth,\n  loginGoogle,\n  loginFacebook,\n  signOutUser,\n} from '../../firebase-config';\nimport LoginForm from '../../components/LoginForm/LoginForm';\nimport * as userActions from '../../redux/actions/userActions';\n\nconst LoginPage = ({\n  user,\n  history,\n  loginUserWithSocials,\n  loginUserWithForm,\n  logOutUser,\n}) => {\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n  const [authUser] = useAuthState(auth);\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    if (authUser !== null && user === null) {\n      loginUserWithSocials(authUser);\n    }\n    if (authUser === null && user === null) {\n      loginUserWithForm();\n    }\n  }, [authUser]);\n  const signOut = () => {\n    signOutUser(logOutUser);\n  };\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n\n    setForm((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const userRef = firestore\n      .collection('users')\n      .where('email', '==', form.email)\n      .where('password', '==', form.password);\n    userRef.get().then((docs) => {\n      if (!docs.empty) {\n        const user = docs.docs[0].data();\n        loginUserWithForm({ user, method: 'set' });\n        history.push('/');\n      } else {\n        setErrors({\n          formError:\n            'We cannot find an account with that email address and password',\n        });\n      }\n    });\n  };\n\n  return (\n    <>\n      <div className=\"loginPage__wrapper\">\n        <LoginForm\n          form={form}\n          onChange={handleChange}\n          onSubmit={handleSubmit}\n          user={user}\n          loginGoogle={loginGoogle}\n          signOut={signOut}\n          loginFacebook={loginFacebook}\n          errors={errors}\n        />\n      </div>\n    </>\n  );\n};\n\nconst mapDispatchToProps = {\n  logOutUser: userActions.logOutUser,\n  loginUserWithSocials: userActions.loginUserWithSocials,\n  loginUserWithForm: userActions.loginUserWithForm,\n};\n\nfunction mapStateToProps(state) {\n  const { user } = state;\n  return {\n    user,\n  };\n}\n\nLoginPage.propTypes = {\n  user: PropTypes.shape({\n    userName: PropTypes.string,\n    photo: PropTypes.string,\n    uid: PropTypes.string,\n    points: PropTypes.number,\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }),\n  loginUserWithSocials: PropTypes.func.isRequired,\n  loginUserWithForm: PropTypes.func.isRequired,\n  logOutUser: PropTypes.func.isRequired,\n};\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(LoginPage)\n);\n"],"sourceRoot":""}