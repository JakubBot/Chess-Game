(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[7],{111:function(e,n,t){"use strict";t.r(n);var a=t(29),o=t(1),r=t.n(o),c=t(21),i=t(69),s=t(66),u=t(85),l=t(20),d=t.n(l),m=t(6),f=t(67),p=t(15),_=(t(98),function(e){var n=e.changeBoard,t=e.changePiece,a=e.changeMode,o=e.createGame;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"configBoard"},r.a.createElement("div",{className:"configBoard__wrapper"},r.a.createElement("div",{className:"configBoard__header flex-c"},"Play Chess"),r.a.createElement("div",{className:"configBoard__config"},r.a.createElement("div",{className:"configBoard__config__board"},r.a.createElement("div",{className:"config__header"},"Your Board"),r.a.createElement("div",{className:"configBoard__options"},r.a.createElement("button",{type:"button",name:"wooden",className:"configBoard__options__btn configBoard__options__btn--active board__btn",onClick:n},"Wooden"),r.a.createElement("button",{type:"button",name:"classic",className:"configBoard__options__btn board__btn",onClick:n},"Classic"))),r.a.createElement("div",{className:"configBoard__config__pieces"},r.a.createElement("div",{className:"config__header"},"Your Pieces"),r.a.createElement("div",{className:"configBoard__options"},r.a.createElement("button",{type:"button",name:"neo_wood",className:"configBoard__options__btn--small configBoard__options__btn--active piece__btn",onClick:t},"Neo wood"),r.a.createElement("button",{type:"button",name:"alpha",className:"configBoard__options__btn configBoard__options__btn piece__btn",onClick:t},"Alpha"),r.a.createElement("button",{name:"uscf",onClick:t,type:"button",className:"configBoard__options__btn piece__btn"},"USCF"),r.a.createElement("button",{name:"classic",onClick:t,type:"button",className:"configBoard__options__btn piece__btn"},"Classic"))),r.a.createElement("div",{className:"mode"},r.a.createElement("div",{className:"config__header"},"Mode"),r.a.createElement("div",{className:"configBoard__options"},r.a.createElement("button",{onClick:a,type:"button",className:"configBoard__options__btn--big configBoard__options__btn--active mode__btn",name:"computer"},"with computer"),r.a.createElement("button",{onClick:a,type:"button",className:"configBoard__options__btn--big mode__btn",name:"online"},"with friend"))),r.a.createElement("div",{className:"findGame flex-c"},r.a.createElement("button",{type:"button",className:"findGame__button",onClick:o},"Find game"))))))}),b=window.jQuery;_.propTypes={board:d.a.string,piece:d.a.string,mode:d.a.string,history:d.a.string,changeBoard:d.a.func.isRequired,changePiece:d.a.func.isRequired,changeMode:d.a.func.isRequired};var g=Object(m.f)((function(e){e.board,e.piece;var n=e.mode,t=e.history,a=Object(u.a)(e,["board","piece","mode","history"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{changeBoard:function(e){var n=e.target,t=n;b(".board__btn").removeClass("configBoard__options__btn--active"),b(t).addClass("configBoard__options__btn--active");var o=n.name;a.changeBoard(o)},changePiece:function(e){var n=e.target,t=n;b(".piece__btn").removeClass("configBoard__options__btn--active"),b(t).addClass("configBoard__options__btn--active"),a.changePiece(n.name)},changeMode:function(e){var n=e.target,t=n;b(".mode__btn").removeClass("configBoard__options__btn--active"),b(t).addClass("configBoard__options__btn--active"),a.changeMode(n.name)},createGame:function(){var e={p1_token:Object(f.a)(8),p2_token:Object(f.a)(8),moveIndex:1,timeLeft:{whiteTime:300,blackTime:300}};"online"===n?p.c.collection("games").add(e).then((function(){return t.push("/play/online/".concat(e.p1_token))})).catch((function(e){throw e})):"computer"===n&&t.push("/play/computer")}}))})),v=t(71),h=t(72),E=t(34),y=window.jQuery;var k={changeBoard:v.a,changePiece:v.c,changeMode:v.b,defaultBoardSettings:v.d,loginUserWithSocials:E.c,loginUserWithForm:E.b};n.default=Object(c.b)((function(e){var n=e.boardInfo,t=e.user;return{board:n.board,piece:n.piece,mode:n.mode,user:t}}),k)((function(e){var n=e.user,t=e.board,c=e.piece,u=e.mode,l=e.changeBoard,d=e.changePiece,m=e.changeMode,f=e.defaultBoardSettings,_=e.loginUserWithSocials,b=e.loginUserWithForm,v=Object(s.a)(p.a),E=Object(a.a)(v,1)[0];Object(o.useEffect)((function(){null!==E&&null===n&&_(E),null===E&&null===n&&b()}),[E]),Object(o.useEffect)((function(){k()}),[t,c]),Object(o.useEffect)((function(){f()}),[]);var k=function(){var e={pieceTheme:"".concat("/Chess-Game","/img/chesspieces/").concat(c,"/{piece}.png"),position:"start"},n=Object(i.a)("board",e),a=y(".chessboard-63f37"),o=y(".square-55d63");"wooden"===t?(a.addClass("woodenBoard"),o.addClass("transparent")):"classic"===t&&(a.removeClass("woodenBoard"),o.removeClass("transparent")),y(window).resize(n.resize)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page__wrapper"},r.a.createElement(h.a,{userName:null===n||void 0===n?void 0:n.userName,points:null===n||void 0===n?void 0:n.points}),r.a.createElement(g,{board:t,piece:c,mode:u,changeBoard:l,changePiece:d,changeMode:m})))}))},66:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t(1),o=function(){return(o=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},r=function(e){return{loading:void 0===e||null===e,value:e}},c=function(e){var n=e?e():void 0,t=Object(a.useReducer)((function(e,n){switch(n.type){case"error":return o({},e,{error:n.error,loading:!1,value:void 0});case"reset":return r(n.defaultValue);case"value":return o({},e,{error:void 0,loading:!1,value:n.value});default:return e}}),r(n)),c=t[0],i=t[1];return{error:c.error,loading:c.loading,reset:function(){var n=e?e():void 0;i({type:"reset",defaultValue:n})},setError:function(e){i({type:"error",error:e})},setValue:function(e){i({type:"value",value:e})},value:c.value}},i=function(e){var n=c((function(){return e.currentUser})),t=n.error,o=n.loading,r=n.setError,i=n.setValue,s=n.value;return Object(a.useEffect)((function(){var n=e.onAuthStateChanged(i,r);return function(){n()}}),[e]),[s,o,t]}},67:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var a=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:28,n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a+=1)n+=t.charAt(Math.floor(Math.random()*t.length));return n}},68:function(e,n,t){"use strict";t.d(n,"d",(function(){return o})),t.d(n,"a",(function(){return c})),t.d(n,"c",(function(){return i})),t.d(n,"e",(function(){return s})),t.d(n,"b",(function(){return u})),t.d(n,"f",(function(){return l}));var a=window.jQuery;function o(){a("#board .square-55d63").removeClass("square")}function r(e){a("#board .square-".concat(e)).addClass("square")}function c(e,n){return!("w"===e&&-1!==n.search(/^b/))||"b"===e&&-1!==n.search(/^w/)}function i(e,n){var t=e.moves({square:n,verbose:!0});if(0!==t.length)for(var a=0;a<t.length;a+=1)r(t[a].to)}function s(e,n,t,a,o,r,c,i,s){var u="b"===e?"Black":"White";return s?"Draw by stalemate":c?"Draw by repetition":i?"Draw by insufficient material":a?"Draw position":r?"".concat(u," in checkmate, gameover"):o?"".concat(u," in check"):n>0?t?"Your Turn":"Opponent's move":"View Only"}function u(e,n){return 1===e&&"w"===n||2===e&&"b"===n}function l(e,n,t){if(1===e){if(0===n.blackTime||"b"===t)return"You won";if(0===n.whiteTime||"w"===t)return"You lost"}if(2===e){if(0===n.whiteTime||"w"===t)return"You won";if(0===n.blackTime||"b"===t)return"You lost"}}},70:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return c}));var a=t(15);function o(e,n){var t=n.p1_token,a=n.p2_token;return e===t?1:e===a?2:0}var r=function(){return window.location?"".concat(window.location.origin).concat(window.location.pathname,"#"):window.location};function c(e,n){var t=e.id,o=a.c.collection("games").doc(t);"w"===n.turn()?o.update({"timeLeft.whiteTime":a.b.firestore.FieldValue.increment(-1)}):o.update({"timeLeft.blackTime":a.b.firestore.FieldValue.increment(-1)})}},71:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"b",(function(){return c})),t.d(n,"e",(function(){return i})),t.d(n,"f",(function(){return s})),t.d(n,"d",(function(){return u}));var a=t(10);function o(e){return{type:a.a.CHANGE_BOARD,board:e}}function r(e){return{type:a.a.CHANGE_PIECE,piece:e}}function c(e){return{type:a.a.CHANGE_MODE,mode:e}}function i(e){return{type:a.a.UPDATE_MOVES,move:e}}function s(e){return{type:a.a.STATUS_TEXT,statusText:e}}function u(){return{type:a.a.DEFAULT_BOARD_SETTINGS}}},72:function(e,n,t){"use strict";var a=t(1),o=t.n(a),r=t(20),c=t.n(r),i=t(70),s=t(68),u=t(74),l=t.n(u),d=t(75),m=t.n(d),f=t(76),p=t.n(f),_=t(77),b=t.n(_),g=t(78),v=t.n(g),h=t(79),E=t.n(h),y=t(80),k=t.n(y),w=t(81),N=t.n(w),B=[{src:m.a,id:1,type:"audio/webm"},{src:p.a,id:2,type:"ogg"},{src:l.a,id:3,type:"mpeg"},{src:b.a,id:4,type:"wav"}],O=[{src:E.a,id:1,type:"audio/webm"},{src:k.a,id:2,type:"ogg"},{src:v.a,id:3,type:"mpeg"},{src:N.a,id:4,type:"wav"}],T=(t(82),function(e){var n=e.moveSongRef,t=e.checkSongRef,a=e.token,r=e.links,c=e.adress,i=e.userName,s=e.points,u=e.whiteTime,l=e.blackTime,d=e.playerNum,m=e.removeLink,f=e.isGameEnded,p=e.onBackToHome;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"game"},f&&o.a.createElement("button",{type:"button",className:"backToHome",onClick:p},"Back to Home"),o.a.createElement("div",{className:"userInformations"},o.a.createElement("div",{className:"userWrapper"},o.a.createElement("span",{className:"playerName"},a||2===d?"Friend":"Guest 120"),o.a.createElement("span",{className:"points"},"(500)")),o.a.createElement("div",{className:"timer"},1===d?l:2===d?u:"5: 00")),o.a.createElement("div",{id:"board",className:"board"}),o.a.createElement("div",{className:"userInformations"},o.a.createElement("div",{className:"userWrapper"},o.a.createElement("span",{className:"playerName"},null!==i&&void 0!==i?i:"Guest 152"),o.a.createElement("span",{className:"points"},"(".concat(null!==s&&void 0!==s?s:500,")"))),o.a.createElement("div",{className:"timer"},1===d?u:2===d?l:"5: 00")),!0===r&&o.a.createElement("div",{className:"links"},o.a.createElement("h3",{className:"links__header"},"Second player Link"),o.a.createElement("div",{className:"links__link"},o.a.createElement("a",{target:"_blank",rel:"noreferrer",href:c.secondPlayer},c.secondPlayer)),o.a.createElement("div",{className:"closeButton",role:"button",tabIndex:0,onClick:m},"X"))),o.a.createElement("audio",{ref:n},B.map((function(e){return o.a.createElement("source",{src:e.src,key:e.id,type:e.type})}))),o.a.createElement("audio",{ref:t},O.map((function(e){return o.a.createElement("source",{src:e.src,key:e.id,type:e.type})}))))}),C=window.jQuery;T.propTypes={moveSongRef:c.a.oneOfType([c.a.func,c.a.shape({current:c.a.instanceOf(Element)})]),checkSongRef:c.a.oneOfType([c.a.func,c.a.shape({current:c.a.instanceOf(Element)})]),links:c.a.bool,userName:c.a.string,points:c.a.number,token:c.a.string,playerNum:c.a.number,isGameEnded:c.a.bool,p1_token:c.a.string,p2_token:c.a.string,timeLeft:c.a.shape({whiteTime:c.a.number,blackTime:c.a.number,isGameActive:c.a.bool}),changeSite:c.a.func,updateLocalStorage:c.a.func,turn:c.a.string};n.a=function(e){var n=e.moveSongRef,t=e.checkSongRef,r=e.p1_token,c=e.p2_token,u=e.links,l=e.userName,d=e.points,m=e.token,f=e.timeLeft,p=e.playerNum,_=e.isGameEnded,b=e.changeSite,g=e.updateLocalStorage,v=e.turn;Object(a.useEffect)((function(){var e,n,t=localStorage.getItem("user"),a=Object(s.f)(p,f,v);null!==t&&(t=JSON.parse(t),_&&t&&g("You won"===a?(null===(e=t)||void 0===e?void 0:e.points)+8:(null===(n=t)||void 0===n?void 0:n.points)-8))}),[_]);var h={firstPlayer:"".concat(Object(i.a)(),"/play/online/").concat(r),secondPlayer:"".concat(Object(i.a)(),"/play/online/").concat(c)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=Math.floor(e/60),t=Math.floor(e-60*n);return"".concat(n,": ").concat(t<10?"0".concat(t):t)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{whiteTime:E(null===f||void 0===f?void 0:f.whiteTime),blackTime:E(null===f||void 0===f?void 0:f.blackTime),playerNum:p,adress:h,removeLink:function(){C(".links").css("display","none")},moveSongRef:n,checkSongRef:t,links:u,userName:l,points:d,isGameEnded:_,onBackToHome:function(){b("/")},token:m}))}},74:function(e,n,t){e.exports=t.p+"static/media/game.7edb4c26.mp3"},75:function(e,n,t){e.exports=t.p+"static/media/game.d6fc5bd9.webm"},76:function(e,n,t){e.exports=t.p+"static/media/game.e3734f3d.ogg"},77:function(e,n,t){e.exports=t.p+"static/media/game.a9b707cc.wav"},78:function(e,n,t){e.exports=t.p+"static/media/check.74550551.mp3"},79:function(e,n,t){e.exports=t.p+"static/media/check.4357e894.webm"},80:function(e,n,t){e.exports=t.p+"static/media/check.2f14f7b7.ogg"},81:function(e,n,t){e.exports=t.p+"static/media/check.8c1d94cd.wav"},82:function(e,n,t){},85:function(e,n,t){"use strict";function a(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,"a",(function(){return a}))},98:function(e,n,t){}}]);
//# sourceMappingURL=7.e0f062e8.chunk.js.map